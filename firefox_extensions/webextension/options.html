<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RecurTrack Options</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #e0e7ff;
            --primary-dark: #1e40af;
            --accent: #10b981;
            --danger: #ef4444;
            --gray-bg: #f3f4f6;
            --gray-border: #e5e7eb;
            --gray-text: #6b7280;
            --white: #fff;
        }
        body {
            font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
            background: var(--gray-bg);
            color: #222;
            margin: 0;
            padding: 0;
            min-width: 380px;
            transition: background 0.3s;
        }
        .header {
            background: var(--primary);
            color: var(--white);
            padding: 32px 0 18px 0;
            text-align: center;
            border-radius: 0 0 18px 18px;
            box-shadow: 0 2px 8px rgba(30, 64, 175, 0.08);
        }
        .header h1 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 6px;
            letter-spacing: 0.01em;
        }
        .subtitle {
            font-size: 1.1rem;
            color: #dbeafe;
            font-weight: 500;
        }
        .section {
            background: var(--white);
            border-radius: 14px;
            box-shadow: 0 2px 8px rgba(30, 64, 175, 0.06);
            margin: 24px 18px;
            padding: 22px 24px 18px 24px;
            transition: box-shadow 0.2s;
        }
        .section h2 {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 14px;
            letter-spacing: 0.01em;
        }
        .form-group {
            margin-bottom: 18px;
        }
        .form-label {
            color: var(--gray-text);
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 4px;
            display: block;
        }
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 9px 12px;
            border: 1px solid var(--gray-border);
            border-radius: 7px;
            font-size: 15px;
            background: var(--white);
            margin-bottom: 7px;
            transition: border 0.2s;
        }
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border: 1.5px solid var(--primary);
            outline: none;
        }
        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }
        .form-checkbox {
            accent-color: var(--primary);
            width: 18px;
            height: 18px;
        }
        .form-checkbox-label {
            font-size: 14px;
            color: #495057;
            cursor: pointer;
        }
        .form-select {
            width: 100%;
            padding: 10px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 14px;
            font-family: inherit;
            background: white;
        }
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .btn, .btn-secondary {
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 7px;
            padding: 9px 18px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 1px 2px rgba(30, 64, 175, 0.04);
            transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
            margin-right: 8px;
            outline: none;
            display: inline-flex;
            align-items: center;
            gap: 7px;
        }
        .btn:hover, .btn-secondary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px) scale(1.03);
            box-shadow: 0 2px 8px rgba(30, 64, 175, 0.10);
        }
        .btn:active, .btn-secondary:active {
            background: var(--primary);
            transform: scale(0.98);
        }
        .btn-secondary {
            background: var(--gray-text);
        }
        .btn-secondary:hover {
            background: #374151;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .status-message {
            display: none;
            margin: 0 18px 18px 18px;
            padding: 12px 18px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            background: var(--accent);
            color: var(--white);
            box-shadow: 0 1px 4px rgba(16, 185, 129, 0.08);
            transition: background 0.2s;
        }
        .status-message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status-message.error {
            background: var(--danger);
            color: var(--white);
        }
        .info-box {
            background: var(--primary-light);
            border-radius: 10px;
            padding: 18px 20px;
            margin: 18px 18px 0 18px;
            color: var(--primary-dark);
            box-shadow: 0 1px 4px rgba(37, 99, 235, 0.07);
        }
        .info-box h3 {
            margin-top: 0;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary-dark);
        }
        .info-box p {
            margin-bottom: 10px;
        }
        .info-box ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .info-box li {
            margin-bottom: 5px;
        }
        .filename-preview {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #dee2e6;
            font-family: monospace;
            font-size: 12px;
        }
        @media (max-width: 600px) {
            .section, .info-box {
                margin: 12px 4px;
                padding: 14px 8px;
            }
            .header {
                padding: 18px 0 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîç RecurTrack Options</h1>
        <div class="subtitle">Configure your video link and filename extraction settings</div>
    </div>

    <div class="info-box">
        <h3>üìã About RecurTrack</h3>
        <p>RecurTrack is a powerful Firefox extension that helps you extract video links and filenames from model profile pages.</p>
        <ul>
            <li><strong>Link Extraction:</strong> Automatically finds video links from profile pages</li>
            <li><strong>Filename Extraction:</strong> Visits each video page to extract actual filenames</li>
            <li><strong>Multi-page Support:</strong> Can extract from all pages of a model's profile</li>
            <li><strong>CloudFlare Handling:</strong> Automatically detects and waits for CloudFlare challenges</li>
            <li><strong>CSV Export:</strong> Export your data for further processing</li>
        </ul>
    </div>

    <!-- General Settings -->
    <div class="section">
        <h2>‚öôÔ∏è General Settings</h2>
        
        <div class="form-group">
            <label for="default-model" class="form-label">Default Model Name</label>
            <input type="text" id="default-model" class="form-input" placeholder="Enter default model name...">
            <small>This will be pre-filled in the sidebar when you open it</small>
        </div>

        <div class="form-group">
            <label for="default-extract-filenames" class="form-label">Default Extraction Settings</label>
            <div class="checkbox-container">
                <input type="checkbox" id="default-extract-all-pages" class="form-checkbox">
                <label for="default-extract-all-pages" class="form-checkbox-label">
                    Extract from all pages (by default)
                </label>
            </div>
            <div class="checkbox-container">
                <input type="checkbox" id="default-extract-filenames" class="form-checkbox">
                <label for="default-extract-filenames" class="form-checkbox-label">
                    Extract filenames (by default)
                </label>
            </div>
        </div>

        <div class="form-group">
            <label for="auto-clear-after-extraction" class="form-label">Auto-Clear Settings</label>
            <div class="checkbox-container">
                <input type="checkbox" id="auto-clear-after-extraction" class="form-checkbox">
                <label for="auto-clear-after-extraction" class="form-checkbox-label">
                    Automatically clear sidebar after successful extraction
                </label>
            </div>
            <small>Clear extraction results and debug logs automatically when extraction completes successfully</small>
        </div>
    </div>

    <!-- Extraction Settings -->
    <div class="section">
        <h2>üîç Extraction Settings</h2>
        
        <div class="form-group">
            <label for="page-load-delay" class="form-label">Page Load Delay (seconds)</label>
            <select id="page-load-delay" class="form-select">
                <option value="2">2 seconds</option>
                <option value="3" selected>3 seconds</option>
                <option value="4">4 seconds</option>
                <option value="5">5 seconds</option>
            </select>
            <small>How long to wait for pages to load before extracting data</small>
        </div>

        <div class="form-group">
            <label for="cloudflare-timeout" class="form-label">CloudFlare Timeout (minutes)</label>
            <select id="cloudflare-timeout" class="form-select">
                <option value="2">2 minutes</option>
                <option value="3">3 minutes</option>
                <option value="5" selected>5 minutes</option>
                <option value="10">10 minutes</option>
            </select>
            <small>Maximum time to wait for CloudFlare challenge completion</small>
        </div>

        <div class="form-group">
            <label for="max-pages" class="form-label">Maximum Pages to Extract</label>
            <select id="max-pages" class="form-select">
                <option value="5">5 pages</option>
                <option value="10" selected>10 pages</option>
                <option value="20">20 pages</option>
                <option value="50">50 pages</option>
                <option value="0">No limit</option>
            </select>
            <small>Limit the number of pages to extract from (0 = no limit)</small>
        </div>
    </div>

    <!-- CSV Export Settings -->
    <div class="section">
        <h2>üì§ CSV Export Settings</h2>
        
        <div class="form-group">
            <label for="csv-separator" class="form-label">CSV Separator</label>
            <select id="csv-separator" class="form-select">
                <option value="," selected>Comma (,)</option>
                <option value=";">Semicolon (;)</option>
                <option value="\t">Tab</option>
            </select>
            <small>Separator to use when exporting CSV data</small>
        </div>

        <div class="form-group">
            <label for="csv-include-headers" class="form-label">CSV Export Options</label>
            <div class="checkbox-container">
                <input type="checkbox" id="csv-include-headers" class="form-checkbox" checked>
                <label for="csv-include-headers" class="form-checkbox-label">
                    Include headers in CSV export
                </label>
            </div>
            <small>
                <strong>Note:</strong> Metadata such as model name and extraction time is now only included in the filename, not in the CSV file itself. The CSV will only contain headers and extracted data rows.
            </small>
        </div>


    </div>

    <!-- Database Settings -->
    <div class="section">
        <h2>üíæ Database Settings</h2>
        
        <div class="form-group">
            <label for="default-directory" class="form-label">Default Save Directory</label>
            <div style="display: flex; gap: 10px; align-items: center;">
                <input type="text" id="default-directory" class="form-input" placeholder="Enter directory path manually...">
                <button id="select-directory" class="btn btn-secondary" style="white-space: nowrap;">Set Path...</button>
            </div>
            <small><strong>Note:</strong> Due to browser security, files will be saved to your browser's default download location. To change this:</small>
            <ul style="margin: 5px 0; padding-left: 20px; font-size: 12px; color: #666;">
                <li>Go to Firefox Settings ‚Üí General ‚Üí Downloads</li>
                <li>Change "Save files to" to your preferred folder</li>
                <li>Or use "Always ask you where to save files"</li>
            </ul>
        </div>

        <div class="form-group">
            <label for="auto-save-database" class="form-label">Auto-Save Database</label>
            <div class="checkbox-container">
                <input type="checkbox" id="auto-save-database" class="form-checkbox">
                <label for="auto-save-database" class="form-checkbox-label">
                    Automatically save database to selected directory
                </label>
            </div>
            <small>Save CSV database files automatically after each extraction</small>
        </div>

        <div class="form-group">
            <label for="ask-where-to-save" class="form-label">Save File Behavior</label>
            <div class="checkbox-container">
                <input type="checkbox" id="ask-where-to-save" class="form-checkbox">
                <label for="ask-where-to-save" class="form-checkbox-label">
                    Ask where to save each file (recommended for custom directories)
                </label>
            </div>
            <small>When enabled, you'll be prompted to choose the save location for each database file</small>
        </div>

        <div class="form-group">
            <label for="filename-format" class="form-label">Database Filename Format</label>
            <input type="text" id="filename-format" class="form-input" placeholder="[Model Name]_Database_[MONTH]-[DAY]-[YEAR].csv">
            <small>Format for automatically saved database files. Available placeholders: [Model Name], [MONTH], [DAY], [YEAR], [DATE], [TIME], [TIMESTAMP]</small>
        </div>

        <div class="form-group">
            <label for="filename-preview" class="form-label">Filename Preview</label>
            <div class="filename-preview">
                <span id="filename-preview-text">example_model_Database_12-25-2024.csv</span>
            </div>
            <small>Preview of how your database files will be named</small>
        </div>
    </div>

    <!-- Advanced Settings -->
    <div class="section">
        <h2>üîß Advanced Settings</h2>
        
        <div class="form-group">
            <label for="debug-mode" class="form-label">Debug Mode</label>
            <div class="checkbox-container">
                <input type="checkbox" id="debug-mode" class="form-checkbox">
                <label for="debug-mode" class="form-checkbox-label">
                    Enable detailed debug logging
                </label>
            </div>
            <small>Show detailed debug information in the sidebar</small>
        </div>

        <div class="form-group">
            <label for="custom-link-pattern" class="form-label">Custom Link Pattern (Advanced)</label>
            <textarea id="custom-link-pattern" class="form-textarea" placeholder="Leave empty to use default pattern..."></textarea>
            <small>Custom regex pattern for finding video links (advanced users only)</small>
        </div>
    </div>

    <!-- Data Management -->
    <div class="section">
        <h2>üóÑÔ∏è Data Management</h2>
        
        <div class="form-group">
            <label class="form-label">Storage Management</label>
            <div class="button-group">
                <button id="export-settings" class="btn btn-secondary">Export Settings</button>
                <button id="import-settings" class="btn btn-secondary">Import Settings</button>
                <button id="reset-settings" class="btn btn-secondary">Reset to Defaults</button>
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">Data Cleanup</label>
            <div class="button-group">
                <button id="clear-all-data" class="btn btn-secondary">Clear All Data</button>
                <button id="export-all-data" class="btn btn-success">Export All Data</button>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="section">
        <div class="button-group">
            <button id="save-settings" class="btn btn-primary">üíæ Save Settings</button>
            <button id="cancel" class="btn btn-secondary">Cancel</button>
        </div>
        <div id="status-message" class="status-message"></div>
    </div>

    <script src="options.js"></script>
</body>
</html> 